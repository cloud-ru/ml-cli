# 🤝 Пример запуска pytorch_elastic... задач через ☁️👔🔒 mls job submit --config ./pytorch_elastic.yaml
# 📚 health - 🚀Полностью опциональный параметр...   
# 📚 policy - 🚀Полностью опциональный параметр...   
# 📚 processes если не задан устанавливается в соответствии с gpu
# 📚 Описание https://api.ai.cloud.ru/public/v2/redoc   
# 📚 Образ: https://cloud.ru/docs/aicloud/mlspace/concepts/environments__basic-images-list__jobs.html 
# 📚 max_retry параметр применимый только к аллокациям 
# 📚 ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️ ⬇️
# 📚 https://github.com/sbercloud-ai/aicloud-examples/tree/master/quick-start
job:
  description: set any useful description
  environment:
    conda_name: conda_name
    flags:
      flag1: true
      flag2: true
    image: cr.ai.cloud.ru/aicloud-base-images/py3.10-torch2.1.2:0.0.40
    variables:
      ENV_1: true
      ENV_2: true
  health:
    external_actions:
    - notify
    internal_action: restart
    period: 20
  policy:
    checkpoint_dir: /home/jovyan/checkpoint
    elastic_max_restarts: 5
    internet_access: true
    priority_class: medium
    queue_name: my-favorite-allocation
  resource:
    elastic_max_workers: 3
    elastic_min_workers: 2
    instance_type: a100.1gpu
    processes: 1
    workers: 3
  script: 'python -c "from time import sleep; sleep(1000);" '
  type: pytorch_elastic
